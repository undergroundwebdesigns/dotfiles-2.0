#!/usr/bin/env zsh

. ~/.env

mkdir -p $SMILE_CODE_PATH

xcode-select -p 1>/dev/null
if [ $? -eq 2 ]; then
  xcode-select --install
fi

# Update App Store apps
sudo softwareupdate -i -a

# Update Homebrew (Cask) & packages
brew update
brew upgrade
brew bundle --file=$DOTFILES/Brewfile
brew cleanup

# Setup 1password and pull credentials:
exec < /dev/tty
op signin smile-io.1password.com alexw@smile.io
eval $(op signin smile_io)

rbenv install 2.6.5
rbenv global 2.6.5 # Use ruby 2.6.5 globally by default.
curl https://get.volta.sh | bash -s -- --skip-setup
volta install node@12
gem update --system
sudo gem install bundler
sudo gem install foreman
sudo gem install rubocop
sudo gem install tmuxinator

. ~/.bash_profile
